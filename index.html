<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Mobile Election App</title>
  <!-- Google Fonts: Montserrat -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link 
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" 
    rel="stylesheet"
  >
  <style>
    /* ---------- Global Reset & Typography ---------- */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Montserrat', sans-serif;
      background: #f4f7fc;
      color: #333;
      min-height: 100vh;
      padding-bottom: 80px; /* extra room for bottom nav */
    }
    h1, h2, h3 {
      color: #1a1a1a;
      margin-bottom: 10px;
    }
    p {
      color: #555;
      margin-bottom: 8px;
    }
    a {
      color: #1976d2;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }

    /* ---------- App Header ---------- */
    .app-header {
      background: #1976d2;
      padding: 20px;
      text-align: center;
      color: #fff;
      font-size: 1.2rem;
      font-weight: 700;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 150;
    }

    /* ---------- Main Container & Views ---------- */
    .view {
      display: none;
      padding: 20px;
    }
    .active {
      display: block;
    }
    .container {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    /* ---------- Bottom Navigation ---------- */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 70px;
      background: #fff;
      border-top: 1px solid #e0e0e0;
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 200;
    }
    .bottom-nav button {
      background: none;
      border: none;
      color: #777;
      font-size: 0.95rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }
    .bottom-nav button.active {
      color: #1976d2;
      font-weight: 700;
    }
    .bottom-nav button svg {
      width: 28px;
      height: 28px;
      margin-bottom: 4px;
    }

    /* ---------- Button Styling ---------- */
    .btn {
      display: inline-block;
      padding: 14px 28px;
      background: #1976d2;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
      font-size: 1rem;
      margin-top: 10px;
    }
    .btn:hover {
      background: #115293;
    }

    /* ---------- Election Card ---------- */
    .election-block {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 15px;
      border: 1px solid #e0e0e0;
      transition: transform 0.2s, background 0.2s;
      cursor: pointer;
    }
    .election-block:hover {
      transform: translateY(-3px);
      background: #f9f9ff;
    }
    .election-block h2 {
      font-size: 1.15rem;
      margin-bottom: 10px;
    }

    /* ---------- Position Block ---------- */
    .position-block {
      margin-bottom: 20px;
    }
    .position-info {
      margin-bottom: 15px;
    }
    .position-info h2 {
      font-size: 1.1rem;
      margin-bottom: 8px;
    }
    .position-nav {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 20px;
    }

    /* ---------- Candidate Cards ---------- */
    .candidates {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .candidate-block {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      width: 140px;
      text-align: center;
      position: relative;
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    .candidate-block:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .candidate-block img {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 10px;
      border: 1px solid #ccc;
    }
    .candidate-block p {
      font-size: 0.95rem;
      font-weight: 500;
      color: #333;
    }
    .best-choice {
      position: absolute;
      top: 8px;
      right: 8px;
      background: #1976d2;
      color: #fff;
      border-radius: 50%;
      padding: 4px 7px;
      font-size: 0.75rem;
      font-weight: bold;
    }

    /* ---------- Candidate Panel Overlay ---------- */
    .overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 300;
      padding: 20px;
    }
    .overlay.active {
      display: flex;
    }
    .candidate-panel {
      background: #fff;
      border-radius: 10px;
      padding: 25px;
      max-width: 600px;
      width: 100%;
      position: relative;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    .candidate-panel img {
      width: 100%;
      max-height: 240px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 15px;
    }
    .candidate-panel h2 {
      font-size: 1.2rem;
      margin-bottom: 10px;
      color: #1976d2;
    }
    .close-panel {
      position: absolute;
      top: 15px;
      right: 15px;
      background: transparent;
      border: none;
      font-size: 1.8rem;
      color: #555;
      cursor: pointer;
    }
    .social-links a {
      margin-right: 15px;
      font-size: 1rem;
      color: #1976d2;
    }

    /* ---------- Reward Panel ---------- */
    .reward-panel {
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    /* ---------- Read-only Summary ---------- */
    .summary-block {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 15px;
    }
    .summary-block h3 {
      margin-bottom: 8px;
      color: #1976d2;
      font-size: 1.05rem;
    }

    /* ---------- Profile View ---------- */
    #profileView .profile-info {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    #profileView .profile-info .avatar-wrapper {
      position: relative;
      width: 140px;
      height: 140px;
      margin-bottom: 15px;
    }
    #profileView .profile-info .avatar-wrapper .avatar-bg {
      background: linear-gradient(135deg, #1976d2, #42a5f5);
      width: 100%;
      height: 100%;
      border-radius: 50%;
      position: absolute;
      top: 0;
      left: 0;
    }
    #profileView .profile-info img {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      border: 4px solid #fff;
      object-fit: cover;
      position: relative;
      z-index: 2;
    }
    #profileView .profile-info h2 {
      margin: 10px 0 5px;
      font-size: 1.2rem;
    }
    #profileView .profile-info p {
      color: #666;
      font-size: 0.95rem;
      text-align: center;
      max-width: 280px;
    }

    /* ---------- Responsive Adjustments ---------- */
    @media (max-width: 480px) {
      .candidate-block {
        width: 120px;
      }
      .bottom-nav button svg {
        width: 24px;
        height: 24px;
      }
      .btn {
        padding: 12px 22px;
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>

  <!-- App Header -->
  <div class="app-header">
    Mobile Election App
  </div>

  <!-- Voting / Election Views -->
  <div id="electionView" class="view active">
    <div class="container">
      <h2>Available Elections</h2>
      <p>Tap an election below to begin voting.</p>
      <div id="electionList">
        <!-- Election blocks injected here -->
      </div>
    </div>
  </div>

  <div id="positionView" class="view">
    <div class="container">
      <h2 id="positionElectionTitle"></h2>
      <div id="positionBlock">
        <!-- Position block info injected here -->
      </div>
      <div class="position-nav">
        <button class="btn" id="skipBtn" onclick="skipPosition()">Skip</button>
        <button class="btn" id="exitElectionBtn" onclick="exitElection()">Exit</button>
      </div>
    </div>
  </div>

  <div id="reviewView" class="view">
    <div class="container">
      <h2>Your Election Choices</h2>
      <div id="reviewSummary">
        <!-- Summary injected here -->
      </div>
      <button class="btn" onclick="backToElections()">Back to Elections</button>
    </div>
  </div>

  <!-- Profile View -->
  <div id="profileView" class="view">
    <div class="container profile-info">
      <div class="avatar-wrapper">
        <div class="avatar-bg"></div>
        <img src="https://via.placeholder.com/140" alt="User Avatar">
      </div>
      <h2>User123</h2>
      <p>Welcome to your profile! Your rewards and activity details will appear here.</p>
    </div>
  </div>

  <!-- Candidate Panel Overlay -->
  <div id="candidateOverlay" class="overlay">
    <div class="candidate-panel">
      <button class="close-panel" onclick="closeCandidatePanel()">×</button>
      <img id="candidateImage" src="" alt="Candidate Image">
      <h2 id="candidateName"></h2>
      <p><strong>Manifesto:</strong> <span id="candidateManifesto"></span></p>
      <p><strong>AI Summary:</strong> <span id="candidateAISummary"></span></p>
      <div class="social-links" id="candidateSocial"></div>
      <button class="btn" onclick="voteForCandidate()">Vote for this Candidate</button>
    </div>
  </div>

  <!-- Reward Panel Overlay -->
  <div id="rewardOverlay" class="overlay">
    <div class="reward-panel">
      <h2>Congratulations!</h2>
      <p>You earned a reward for voting on this position.</p>
      <button class="btn" onclick="rewardConfirmed()">Okay</button>
    </div>
  </div>

  <!-- Bottom Navigation Bar -->
  <div class="bottom-nav">
    <button id="navVoting" class="active" onclick="showPrimaryView('electionView')">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M19 3H5c-1.1 0-2 .9-2 2v14l4-4h12c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/>
      </svg>
      Voting
    </button>
    <button id="navProfile" onclick="showPrimaryView('profileView')">
      <svg viewBox="0 0 24 24" fill="currentColor">
        <path d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"/>
      </svg>
      Profile
    </button>
  </div>

  <script>
    /* ---------- Sample Data ---------- */
    const elections = [
      {
        id: 1,
        institution: "University Student Council",
        timeRemaining: "2 days 5 hrs",
        positionsCount: 2,
        reward: "Free Coffee Voucher",
        positions: [
          {
            id: 101,
            title: "President",
            info: "The President oversees all council operations.",
            moreInfoLink: "#",
            candidates: [
              {
                id: 1001,
                name: "Alice Johnson",
                image: "https://via.placeholder.com/150?text=Alice",
                manifesto: "Better campus facilities and student support.",
                aiSummary: "Focus on improved infrastructure and welfare.",
                social: { twitter: "#", linkedin: "#" },
                bestChoice: true
              },
              {
                id: 1002,
                name: "Bob Smith",
                image: "https://via.placeholder.com/150?text=Bob",
                manifesto: "Transparency and student empowerment.",
                aiSummary: "Emphasizes accountability and active participation.",
                social: { twitter: "#", linkedin: "#" },
                bestChoice: false
              }
            ],
            vote: null
          },
          {
            id: 102,
            title: "Vice President",
            info: "Supports the President and manages specific projects.",
            moreInfoLink: "#",
            candidates: [
              {
                id: 1003,
                name: "Carol White",
                image: "https://via.placeholder.com/150?text=Carol",
                manifesto: "Innovative projects for community engagement.",
                aiSummary: "Strong focus on community and innovation.",
                social: { twitter: "#", linkedin: "#" },
                bestChoice: false
              },
              {
                id: 1004,
                name: "David Lee",
                image: "https://via.placeholder.com/150?text=David",
                manifesto: "Commitment to student representation.",
                aiSummary: "Highlights dedication and representation.",
                social: { twitter: "#", linkedin: "#" },
                bestChoice: true
              }
            ],
            vote: null
          }
        ]
      }
      // Additional elections can be added here...
    ];

    /* ---------- Global State ---------- */
    let currentElection = null;
    let currentPositionIndex = 0;
    let selectedCandidate = null;

    /* ---------- Initialization ---------- */
    document.addEventListener("DOMContentLoaded", () => {
      renderElectionList();
    });

    /* ---------- Primary View Switcher ---------- */
    function showPrimaryView(viewId) {
      if (viewId === 'electionView') {
        showView('electionView');
      } else if (viewId === 'profileView') {
        showView('profileView');
      }
      document.getElementById("navVoting").classList.toggle("active", viewId === 'electionView');
      document.getElementById("navProfile").classList.toggle("active", viewId === 'profileView');
    }

    /* ---------- View Rendering Functions ---------- */
    function renderElectionList() {
      const electionList = document.getElementById("electionList");
      electionList.innerHTML = "";
      elections.forEach(election => {
        const block = document.createElement("div");
        block.className = "election-block";
        block.onclick = () => startElection(election.id);
        block.innerHTML = `
          <h2>${election.institution}</h2>
          <p><strong>Time:</strong> ${election.timeRemaining}</p>
          <p><strong>Positions:</strong> ${election.positionsCount}</p>
          <p><strong>Reward:</strong> ${election.reward}</p>
        `;
        electionList.appendChild(block);
      });
    }

    function startElection(electionId) {
      currentElection = elections.find(e => e.id === electionId);
      currentPositionIndex = 0;
      selectedCandidate = null;
      document.getElementById("positionElectionTitle").textContent = currentElection.institution;
      showView("positionView");
      renderCurrentPosition();
    }

    function renderCurrentPosition() {
      const posContainer = document.getElementById("positionBlock");
      posContainer.innerHTML = "";
      if (currentPositionIndex >= currentElection.positions.length) {
        renderReviewSummary();
        showView("reviewView");
        return;
      }
      const position = currentElection.positions[currentPositionIndex];
      const posBlock = document.createElement("div");
      posBlock.className = "position-block";
      posBlock.innerHTML = `
        <div class="position-info">
          <h2>Position: ${position.title}</h2>
          <p>${position.info}</p>
          <a href="${position.moreInfoLink}" target="_blank">More Info</a>
        </div>
        <div class="candidates" id="candidatesContainer">
          <!-- Candidate blocks go here -->
        </div>
        <div id="voteConfirmation" style="margin-top:15px;"></div>
      `;
      posContainer.appendChild(posBlock);
      renderCandidates(position.candidates);
    }

    function renderCandidates(candidates) {
      const container = document.getElementById("candidatesContainer");
      container.innerHTML = "";
      candidates.forEach(candidate => {
        const candidateDiv = document.createElement("div");
        candidateDiv.className = "candidate-block";
        candidateDiv.onclick = () => openCandidatePanel(candidate);
        candidateDiv.innerHTML = `
          <img src="${candidate.image}" alt="${candidate.name}">
          <p>${candidate.name}</p>
          ${candidate.bestChoice ? '<div class="best-choice">★</div>' : ""}
        `;
        container.appendChild(candidateDiv);
      });
    }

    /* ---------- Candidate Panel Functions ---------- */
    function openCandidatePanel(candidate) {
      selectedCandidate = candidate;
      document.getElementById("candidateImage").src = candidate.image;
      document.getElementById("candidateName").textContent = candidate.name;
      document.getElementById("candidateManifesto").textContent = candidate.manifesto;
      document.getElementById("candidateAISummary").textContent = candidate.aiSummary;
      const socialDiv = document.getElementById("candidateSocial");
      socialDiv.innerHTML = "";
      for (const [platform, link] of Object.entries(candidate.social)) {
        const anchor = document.createElement("a");
        anchor.href = link;
        anchor.textContent = platform;
        anchor.target = "_blank";
        socialDiv.appendChild(anchor);
      }
      document.getElementById("candidateOverlay").classList.add("active");
    }

    function closeCandidatePanel() {
      document.getElementById("candidateOverlay").classList.remove("active");
    }

    function voteForCandidate() {
      const position = currentElection.positions[currentPositionIndex];
      position.vote = selectedCandidate;
      closeCandidatePanel();
      const voteConf = document.getElementById("voteConfirmation");
      voteConf.innerHTML = `
        <p>You selected <strong>${selectedCandidate.name}</strong> for ${position.title}.</p>
        <button class="btn" onclick="confirmVote()">Confirm Vote</button>
      `;
    }

    function confirmVote() {
      document.getElementById("rewardOverlay").classList.add("active");
    }

    /* ---------- Reward Panel Confirmation ---------- */
    function rewardConfirmed() {
      document.getElementById("rewardOverlay").classList.remove("active");
      currentPositionIndex++;
      selectedCandidate = null;
      renderCurrentPosition();
    }

    /* ---------- Skip or Exit Functions ---------- */
    function skipPosition() {
      currentElection.positions[currentPositionIndex].vote = "Skipped";
      currentPositionIndex++;
      selectedCandidate = null;
      renderCurrentPosition();
    }

    function exitElection() {
      alert("Exiting election. Your progress has been saved.");
      showView("electionView");
    }

    /* ---------- Review Summary ---------- */
    function renderReviewSummary() {
      const reviewContainer = document.getElementById("reviewSummary");
      reviewContainer.innerHTML = "";
      currentElection.positions.forEach(position => {
        const summary = document.createElement("div");
        summary.className = "summary-block";
        summary.innerHTML = `
          <h3>${position.title}</h3>
          <p><strong>Your Choice:</strong> ${
            position.vote
              ? (typeof position.vote === "object" ? position.vote.name : position.vote)
              : "No vote"
          }</p>
        `;
        reviewContainer.appendChild(summary);
      });
    }

    function backToElections() {
      currentElection = null;
      currentPositionIndex = 0;
      selectedCandidate = null;
      showView("electionView");
    }

    /* ---------- Helper: Generic View Switcher ---------- */
    function showView(viewId) {
      document.querySelectorAll(".view").forEach(view => view.classList.remove("active"));
      document.getElementById(viewId).classList.add("active");
    }
  </script>
</body>
</html>
